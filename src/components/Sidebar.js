"use client";

import Image from "next/image";
import LogoVisalytica from "../assets/logoVisalyticaAzulClaro.svg";
import LogoDasa from "../../public/LogoDasa.svg";
import Link from "next/link";
import { useRouter, usePathname } from "next/navigation";
import { useAuth } from "../context/AuthContext";

export default function Sidebar() {
  const router = useRouter();
  const auth = useAuth();
  const pathName = usePathname();

  const handleLogout = () => {
    auth.logout();
    router.push("/login");
  };

  if (!auth.user) {
    return null;
  }

  return (
    <div className="z-50 flex flex-col h-screen w-[270px] max-lg:hidden items-center justify-between py-10 bg-white shadow-sm border-r border-cinza">

      <div className="flex flex-col gap-12">
        <div className="flex flex-col justify-between items-center gap-3 ">
          <Link href={"/Home"}>
            <Image
              src={LogoVisalytica}
              alt="Logo da Visalytica"
              className="w-full px-10"
            />
          </Link>
          <div className="w-20 h-0.5 bg-cinza_medio"></div>
          <a href="https://www.dasa.com.br" target="_blank" rel="noreferrer">
            <Image
              src={LogoDasa}
              alt="Logo da Dasa"
              className="h-5"
            />
          </a>
        </div>

        <div className="flex flex-col">
          <Link href={`/Home`}>
            <div className="flex gap-4 px-6 py-4 font-semibold" style={pathName == `/Home` ? { backgroundImage: `linear-gradient(to right, #166DED, #716FEA)` } : {}}>
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M7 17H9V12H7V17ZM15 17H17V7H15V17ZM11 17H13V14H11V17ZM11 12H13V10H11V12ZM5 21C4.45 21 3.97917 20.8042 3.5875 20.4125C3.19583 20.0208 3 19.55 3 19V5C3 4.45 3.19583 3.97917 3.5875 3.5875C3.97917 3.19583 4.45 3 5 3H19C19.55 3 20.0208 3.19583 20.4125 3.5875C20.8042 3.97917 21 4.45 21 5V19C21 19.55 20.8042 20.0208 20.4125 20.4125C20.0208 20.8042 19.55 21 19 21H5ZM5 19H19V5H5V19Z" fill={pathName == `/Home` ? "white" : `#9B9B9B`} />
              </svg>
              <h2 style={pathName == `/Home` ? { color: `white` } : { color: `#9b9b9b` }}>Dashboard</h2>
            </div>
          </Link>
          <Link href={`/Analise`}>
            <div className="flex gap-4 px-6 py-4 font-semibold" style={pathName == `/Analise` || pathName == "/GeraPDF" ? { backgroundImage: `linear-gradient(to right, #166DED, #716FEA)` } : {}}>
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M5 21V19H10V17C8.61667 17 7.4375 16.5125 6.4625 15.5375C5.4875 14.5625 5 13.3833 5 12C5 10.9833 5.27917 10.0583 5.8375 9.225C6.39583 8.39167 7.15 7.78333 8.1 7.4C8.23333 6.83333 8.52917 6.375 8.9875 6.025C9.44583 5.675 9.96667 5.5 10.55 5.5L10 3.95L10.95 3.6L10.6 2.7L12.5 2L12.8 2.95L13.75 2.6L16.5 10.1L15.55 10.45L15.9 11.4L14 12.1L13.7 11.15L12.75 11.5L12.15 9.85C11.9 10.0833 11.6125 10.2583 11.2875 10.375C10.9625 10.4917 10.6333 10.5333 10.3 10.5C9.93333 10.4667 9.59167 10.3542 9.275 10.1625C8.95833 9.97083 8.68333 9.73333 8.45 9.45C8 9.71667 7.64583 10.075 7.3875 10.525C7.12917 10.975 7 11.4667 7 12C7 12.8333 7.29167 13.5417 7.875 14.125C8.45833 14.7083 9.16667 15 10 15H18V17H13V19H19V21H5ZM13.65 9.55L14.55 9.2L12.85 4.5L11.9 4.85L13.65 9.55ZM10.5 9C10.7833 9 11.0208 8.90417 11.2125 8.7125C11.4042 8.52083 11.5 8.28333 11.5 8C11.5 7.71667 11.4042 7.47917 11.2125 7.2875C11.0208 7.09583 10.7833 7 10.5 7C10.2167 7 9.97917 7.09583 9.7875 7.2875C9.59583 7.47917 9.5 7.71667 9.5 8C9.5 8.28333 9.59583 8.52083 9.7875 8.7125C9.97917 8.90417 10.2167 9 10.5 9Z" fill={pathName == `/Analise` || pathName == "/GeraPDF" ? "white" : `#9B9B9B`} />
              </svg>
              <h2 style={pathName == `/Analise` || pathName == "/GeraPDF" ? { color: `white` } : { color: `#9b9b9b` }}>Fazer análise</h2>
            </div>
          </Link>
          <Link href={`/ConsultarPacientes`}>
            <div className="flex gap-4 px-6 py-4 font-semibold" style={pathName == `/ConsultarPacientes` ? { backgroundImage: `linear-gradient(to right, #166DED, #716FEA)` } : {}}>
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M0 18V16.425C0 15.7083 0.366667 15.125 1.1 14.675C1.83333 14.225 2.8 14 4 14C4.21667 14 4.425 14.0042 4.625 14.0125C4.825 14.0208 5.01667 14.0417 5.2 14.075C4.96667 14.425 4.79167 14.7917 4.675 15.175C4.55833 15.5583 4.5 15.9583 4.5 16.375V18H0ZM6 18V16.375C6 15.8417 6.14583 15.3542 6.4375 14.9125C6.72917 14.4708 7.14167 14.0833 7.675 13.75C8.20833 13.4167 8.84583 13.1667 9.5875 13C10.3292 12.8333 11.1333 12.75 12 12.75C12.8833 12.75 13.6958 12.8333 14.4375 13C15.1792 13.1667 15.8167 13.4167 16.35 13.75C16.8833 14.0833 17.2917 14.4708 17.575 14.9125C17.8583 15.3542 18 15.8417 18 16.375V18H6ZM19.5 18V16.375C19.5 15.9417 19.4458 15.5333 19.3375 15.15C19.2292 14.7667 19.0667 14.4083 18.85 14.075C19.0333 14.0417 19.2208 14.0208 19.4125 14.0125C19.6042 14.0042 19.8 14 20 14C21.2 14 22.1667 14.2208 22.9 14.6625C23.6333 15.1042 24 15.6917 24 16.425V18H19.5ZM8.125 16H15.9C15.7333 15.6667 15.2708 15.375 14.5125 15.125C13.7542 14.875 12.9167 14.75 12 14.75C11.0833 14.75 10.2458 14.875 9.4875 15.125C8.72917 15.375 8.275 15.6667 8.125 16ZM4 13C3.45 13 2.97917 12.8042 2.5875 12.4125C2.19583 12.0208 2 11.55 2 11C2 10.4333 2.19583 9.95833 2.5875 9.575C2.97917 9.19167 3.45 9 4 9C4.56667 9 5.04167 9.19167 5.425 9.575C5.80833 9.95833 6 10.4333 6 11C6 11.55 5.80833 12.0208 5.425 12.4125C5.04167 12.8042 4.56667 13 4 13ZM20 13C19.45 13 18.9792 12.8042 18.5875 12.4125C18.1958 12.0208 18 11.55 18 11C18 10.4333 18.1958 9.95833 18.5875 9.575C18.9792 9.19167 19.45 9 20 9C20.5667 9 21.0417 9.19167 21.425 9.575C21.8083 9.95833 22 10.4333 22 11C22 11.55 21.8083 12.0208 21.425 12.4125C21.0417 12.8042 20.5667 13 20 13ZM12 12C11.1667 12 10.4583 11.7083 9.875 11.125C9.29167 10.5417 9 9.83333 9 9C9 8.15 9.29167 7.4375 9.875 6.8625C10.4583 6.2875 11.1667 6 12 6C12.85 6 13.5625 6.2875 14.1375 6.8625C14.7125 7.4375 15 8.15 15 9C15 9.83333 14.7125 10.5417 14.1375 11.125C13.5625 11.7083 12.85 12 12 12ZM12 10C12.2833 10 12.5208 9.90417 12.7125 9.7125C12.9042 9.52083 13 9.28333 13 9C13 8.71667 12.9042 8.47917 12.7125 8.2875C12.5208 8.09583 12.2833 8 12 8C11.7167 8 11.4792 8.09583 11.2875 8.2875C11.0958 8.47917 11 8.71667 11 9C11 9.28333 11.0958 9.52083 11.2875 9.7125C11.4792 9.90417 11.7167 10 12 10Z" fill={pathName == `/ConsultarPacientes` ? "white" : `#9B9B9B`} />
              </svg>
              <h2 style={pathName == `/ConsultarPacientes` ? { color: `white` } : { color: `#9b9b9b` }}>Consultar pacientes</h2>
            </div>
          </Link>
        </div>
      </div>

      <div className="relative">
        <div className="flex flex-col items-center gap-3 cursor-pointer">
          <div className="w-20 h-0.5 bg-cinza_medio"></div>
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="25" viewBox="0 0 22 25" fill="none">
            <path d="M10.9375 12.5C14.3896 12.5 17.1875 9.70215 17.1875 6.25C17.1875 2.79785 14.3896 0 10.9375 0C7.48535 0 4.6875 2.79785 4.6875 6.25C4.6875 9.70215 7.48535 12.5 10.9375 12.5ZM5.07812 20.7031C5.07812 21.3525 5.60059 21.875 6.25 21.875C6.89941 21.875 7.42188 21.3525 7.42188 20.7031C7.42188 20.0537 6.89941 19.5312 6.25 19.5312C5.60059 19.5312 5.07812 20.0537 5.07812 20.7031ZM15.625 14.0918V16.4844C17.4072 16.8457 18.75 18.4277 18.75 20.3125V22.3486C18.75 22.7197 18.4863 23.042 18.1201 23.1152L16.5479 23.4277C16.3379 23.4717 16.1328 23.335 16.0889 23.1201L15.9375 22.3535C15.8936 22.1436 16.0303 21.9336 16.2451 21.8945L17.1875 21.7041V20.3125C17.1875 17.2461 12.5 17.1338 12.5 20.4053V21.709L13.4424 21.8994C13.6523 21.9434 13.7891 22.1484 13.75 22.3584L13.5986 23.125C13.5547 23.335 13.3496 23.4717 13.1396 23.4326L11.6162 23.2275C11.2305 23.1738 10.9424 22.8467 10.9424 22.4512V20.3125C10.9424 18.4277 12.2852 16.8506 14.0674 16.4844V14.2773C13.96 14.3115 13.8525 14.3311 13.7451 14.3701C12.8662 14.6777 11.9238 14.8486 10.9424 14.8486C9.96094 14.8486 9.01855 14.6777 8.13965 14.3701C7.77832 14.2432 7.41211 14.165 7.03613 14.1162V18.1006C8.16406 18.4375 8.98926 19.4727 8.98926 20.708C8.98926 22.2168 7.76367 23.4424 6.25488 23.4424C4.74609 23.4424 3.52051 22.2168 3.52051 20.708C3.52051 19.4727 4.3457 18.4375 5.47363 18.1006V14.1748C2.36816 14.6973 0 17.373 0 20.625V22.8125C0 24.0186 0.981445 25 2.1875 25H19.6875C20.8936 25 21.875 24.0186 21.875 22.8125V20.625C21.875 17.1094 19.1016 14.2627 15.625 14.0918Z" fill="#166DED" />
          </svg>

          <h3 className="text-cinza_escuro font-bold tracking-wider">
            Olá,
            <span className="ml-1">{auth.user.nome.split(' ')[0]}</span>
          </h3>
          <p className="text-roxo underline cursor-pointer" onClick={handleLogout}>Sair</p>
        </div>


      </div>
    </div>
  );
}